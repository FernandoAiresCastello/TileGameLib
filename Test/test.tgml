
# This line is a comment

	CALL test_maprender
	CALL test_object_manip
	SYSTEM.HALT
	CALL test_logging
	CALL test_string
	CALL test_math

:exit
	SYSTEM.EXIT

:test_object_manip
	RET

:test_maprender
	PUSH 40
	PUSH 30
	WINDOW.OPEN
	PUSH 1
	STORE $env.screen_backcolor
	WINDOW.CLEAR
	WINDOW.REFRESH
	PUSH 1
	STORE $env.map_viewport_x
	PUSH 3
	STORE $env.map_viewport_y
	PUSH 32
	STORE $env.map_viewport_width
	PUSH 24
	STORE $env.map_viewport_height
	PUSH ../../../Test/test.tgmap
	MAP.LOAD
	PUSH 64
	STORE $env.text_forecolor
	PUSH 1
	DUP
	STORE $env.text_cursor_x
	STORE $env.text_cursor_y
	PUSH Hello World!
	WINDOW.PRINT
	PUSH 1000
	SYSTEM.SLEEP
	MAP.HIDE
	PUSH 1000
	SYSTEM.SLEEP
	MAP.SHOW
	RET

:test_logging
	PUSH This is a test log message
	SYSTEM.LOG
	RET

:test_string
	PUSH 255
	PUSH 6,d
	STRING.FORMAT
	POP
	PUSH 12
	PUSH 2,x
	STRING.FORMAT
	POP
	PUSH 12
	PUSH 2,X
	STRING.FORMAT
	POP
	PUSH 15
	PUSH 8,b
	STRING.FORMAT
	POP
	PUSH Left
	PUSH Right
	PUSH 0xff0d
	STRING.JOIN
	POP
	PUSH Hello
	PUSH world!
	PUSH 0x20
	STRING.JOIN
	POP
	RET
	
:test_math
	PUSH 22
	PUSH 3
	MATH.POW
	POP
	PUSH 44
	MATH.SQRT
	POP
	PUSH 1
	MATH.INC
	MATH.DEC
	POP
	PUSH 50
	PUSH 20
	MATH.ADD
	POP
	PUSH 30
	PUSH 10
	MATH.SUB
	POP
	PUSH 10
	PUSH 5
	MATH.MUL
	POP
	PUSH 30
	PUSH 2
	MATH.DIV
	POP
	PUSH 100
	PUSH 88
	MATH.MOD
	POP
	RET
